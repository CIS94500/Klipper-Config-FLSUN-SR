# Klipper - Flsun Super Racer
#	 ___      ___  ________  ___  ___  ________
#	|"  \    /"  |/"       )|"  \/"  |/"       )
#	 \   \  //  /(:   \___/  \   \  /(:   \___/
#	  \\  \/. ./  \___  \     \\  \/  \___  \
#	   \.    //    __/  \\    /   /    __/  \\
#	    \\   /    /" \   :)  /   /    /" \   :)
#	     \__/    (_______/  |___/    (_______/
#
# 01010110  01010011  01011001  01010011
#
# Auteur: Virgile de Champigny
#
# Pour compiler le firmware de la carte mère, exécuter les commandes suivantes depuis le terminal SSH :
#
# > cd /home/pi/klipper/
# > make clean
# > make menuconfig
#
# Micro-controller Architecture (STMicroelectronics STM32)
# Processor model (STM32F407)
# Bootloader offset (48KiB bootloader)
# Clock Reference (8 MHz crystal)
# Communication interface (Serial (on USB on PA11/PA12))
#
# Compiler le firmware de la carte mère avec la commande :
# > make
#
# Copier sur une carte SD le fichier généré dans "out/klipper.bin" et renommer le en "Robin_nano_v3.bin"
# Insérer la carte SD dans l'imprimante et démmarrer celle ci, puis patientez quelques secondes.
#
# NB: Après la flash, l'écran d'origine de la flsun SR devient inactif.
#
# Nettoyage des fichiers générés avec la commande :
# > make clean
#
####################################################################
# FICHIERS A INCLURE
####################################################################

[include macros/*.cfg]
#[include adxl345.cfg]

####################################################################
# CARTE MERE - MCU
####################################################################

[mcu]
#    lancer la commande > ls /dev/serial/by-id/* depuis le terminal SSH pour obtenir votre serial.
serial: /dev/serial/by-id/usb-Klipper_stm32f407xx_370025001851303330383638-if00
#    Le port série à connecter à l'unité MCU. Si vous n'êtes pas sûr (ou s'il
#    change) consultez la section "Où est mon port série ?" de la FAQ.
#    Ce paramètre doit être fourni lors de l'utilisation d'un port série.
#baud: 250000
#    Le débit en bauds à utiliser. La valeur par défaut est 250000.
restart_method: command
#    Ceci contrôle le mécanisme que l'hôte utilisera pour réinitialiser le microcontrôleur.
#    Les choix sont 'arduino', 'cheetah', 'rpi_usb', et 'command'. La méthode 'arduino'
#    (basculer DTR) est courante sur les cartes et clones Arduino.
#    La méthode 'cheetah' est une méthode particulière nécessaire pour certaines cartes
#    Fysetc Cheetah. La méthode 'rpi_usb' est utile sur les cartes Raspberry Pi avec des
#    micro-contrôleurs alimentés par USB - elle désactive brièvement l'alimentation de tous
#    les ports USB pour effectuer une réinitialisation du microcontrôleur.
#    La méthode 'command' implique l'envoi d'une commande Klipper au microcontrôleur
#    afin qu'il puisse # se réinitialiser.
#    La valeur par défaut est 'arduino' si le micro-contrôleur communique via un port série,
#    'command' sinon.

####################################################################
# LIMITE DE LA MACHINE
####################################################################

[printer]
kinematics: delta
#    Le type d'imprimante utilisée. Cette option peut être l'une des suivantes : cartésienne,
#    corexy, corexz, hybrid_corexy, hybrid_corexz, rotary_delta, delta, deltesian, polar, winch,
#    ou none. Ce paramètre doit être spécifié.
max_velocity: 300
#    Vitesse maximale (en mm/s) de la tête d'outil (par rapport à l'impression).
#    Ce paramètre doit être spécifié.
max_accel: 3800
#    Accélération maximale (en mm/s^2) de la tête de l'outil (par rapport à l'impression).
#    Ce paramètre doit être spécifié.
#max_accel_to_decel: 1900
#    Une pseudo-accélération (en mm/s^2) contrôlant la vitesse à laquelle la tête de l'outil peut
#    passer de l'accélération à la décélération. Elle est utilisée pour réduire la vitesse maximale
#    des courts mouvements en zigzag (et donc réduire les vibrations de l'imprimante dues à ces
#    mouvements). La valeur par défaut est la moitié de max_accel.
square_corner_velocity: 5
#    La vitesse maximale (en mm/s) à laquelle la tête d'outil peut parcourir un angle de 90 degrés.
#    Une valeur non nulle peut réduire les changements dans les débits de l'extrudeuse en
#    permettant des changements de vitesse instantanés de la tête d'outil pendant les virages.
#    Cette valeur configure l'algorithme interne de prise de virage à vitesse centripète ; les virages
#    dont l'angle est supérieur à 90 degrés auront une vitesse de prise de virage plus élevée tandis
#    que ceux d'angles inférieurs à 90 degrés auront une vitesse de virage plus faible.
#    Si ce paramètre est défini sur zéro, la tête d'outil décélérera jusqu'à zéro à chaque coin.
#    La valeur par défaut est 5mm/s.
max_z_velocity: 300
#    Ceci définit la vitesse maximale (en mm/s) du mouvement le long de l'axe z
#    Ce paramètre peut être utilisé pour limiter la vitesse maximale du moteur pas à pas z.
#    La valeur par défaut est l'utilisation de max_velocity pour
#    max_z_velocity.
#max_z_accel: 3800
#    Ce paramètre définit l'accélération maximale (en mm/s^2) du mouvement sur l'axe z.
#    Cela limite l'accélération du moteur pas à pas z. La valeur par défaut est
#    d'utiliser max_accel pour max_z_accel.
minimum_z_position: -5
#    Position Z minimale à laquelle l'utilisateur peut ordonner à la tête de se déplacer.
#    La valeur par défaut est 0.
#delta_radius: 151.7
#    Rayon (en mm) du cercle horizontal formé par les trois colonnes d'axe linéaire.
#    Ce paramètre peut également être calculé comme suit :
#        delta_radius = smooth_rod_offset - effector_offset - carriage_offset.
#    Ce paramètre doit être fourni.
print_radius: 132
#    Le rayon (en mm) des coordonnées XY valides de la tête d'extrusion. On peut utiliser
#    ce paramètre pour personnaliser la vérification de la plage de mouvements de la tête.
#    Si une grande valeur est spécifiée ici, il peut être possible de faire entrer la tête en collision
#    avec une colonne. La valeur par défaut est d'utiliser delta_radius pour print_radius (ce qui
#    empêchera normalement une collision avec une colonne).

####################################################################
# DÉLAI D'INACTIVITÉ
####################################################################

[idle_timeout]
#gcode:
#    Une liste de commandes G-Code à exécuter lors d'un délai d'inactivité. Voir
#    docs/Command_Templates.md pour le format G-Code. La valeur par défaut
#    est d'exécuter "TURN_OFF_HEATERS" et "M84".
timeout: 1800
#    Durée d'attente (en secondes) avant d'exécuter les commandes G-Code ci-dessus.
#    La valeur par défaut est de 600 secondes.

####################################################################
# A (X-STEPPER) CONFIGURATION
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> ARM_LENGTH, POSITION_ENDSTOP.
####################################################################

[stepper_a] # X
step_pin: PE3
#    Broche GPIO du moteur (déclenchée à l'état haut). Ce paramètre doit être fourni.
dir_pin: PE2
#    Broche GPIO de direction (le niveau haut indique une direction positive). Ce paramètre
#    doit être fourni.
enable_pin: !PE4
#    Broche d'activation (par défaut, enable est haut ; utilisez ! pour indiquer enable
#    bas). Si ce paramètre n'est pas fourni, le pilote du moteur pas à pas doit toujours
#    être activé.
microsteps: 128
#    Le nombre de micropas utilisés par le pilote du moteur pas à pas. Ce paramètre
#    doit être fourni.
rotation_distance: 40
#    Distance (en mm) parcourue par l'axe lors d'une rotation complète du moteur pas à pas
#    (ou de l'engrenage final si le rapport de vitesse est spécifié).
#    Ce paramètre doit être fourni.
full_steps_per_rotation: 200
#    Nombre de pas complets pour une rotation complète du moteur pas à pas.
#    Réglez ce paramètre sur 200 pour un moteur pas à pas de 1,8 degré ou sur 400 pour
#    un moteur de 0,9 degré. La valeur par défaut est 200.
endstop_pin: ^PA15
#    Broche de détection de l'interrupteur de fin de course. Si cette broche est sur un mcu différent de
#    celui du moteur pas à pas, cela active le "multi-mcu". Ce paramètre doit être fourni pour les moteurs
#    pas à pas X, Y, et Z sur les imprimantes de style cartésien.
homing_speed: 60
#    Vitesse maximale (en mm/s) du moteur pas à pas lors de la mise à l'origine.
#    La valeur par défaut est de 5mm/s.
#    is 5mm/s.
homing_retract_dist: 5.0
#    Distance de recul (en mm) avant le retour au point d'origine une seconde fois.
#    Réglez cette valeur à zéro pour désactiver le second retour à l'origine.
#    La valeur par défaut est de 5 mm.
homing_retract_speed: 10
#    Vitesse à utiliser pour le mouvement de recul après le retour à l'origine au cas où elle soit
#    différente de la vitesse de mise à l'origine qui est la valeur par défaut de ce paramètre.
#arm_length: 315
#    Longueur (en mm) du bras reliant cette colonne à la tête d'impression.
#    Ce paramètre doit être fourni pour stepper_a ; pour stepper_b et stepper_c, ce paramètre
#    prend par défaut la valeur spécifiée pour stepper_a.
#position_endstop: 336.5
#    Distance (en mm) entre la buse et le lit lorsque la buse se trouve au centre de la zone de
#    construction et que la fin de course se déclenche. Ce paramètre doit être fourni pour le
#    stepper_a ; pour les stepper_b et stepper_c, ce paramètre prend par défaut la valeur
#    spécifiée pour stepper_a.

#-----------------------------------------------------------------#

[tmc2209 stepper_a]
uart_pin: PD5
#    La broche connectée à la ligne PDN_UART de la TMC2208. Ce paramètre doit être fourni.
interpolate: False
#    Si true, active l'interpolation de pas (le pilote fera un pas interne à un taux de 256
#    micro-pas). Cette interpolation introduit une petite déviation systémique de la position -
#    voir TMC_Drivers.md pour plus de détails. La valeur par défaut est True.
run_current: 1.138
#    La quantité de courant (en ampères RMS) à configurer que le pilote doit utiliser
#    pendant le mouvement du pas. Ce paramètre doit être fourni.
sense_resistor: 0.110
#    La résistance (en ohms) de la résistance de détection du moteur (Vréf).
#    La valeur par défaut est de 0.110 ohms.
stealthchop_threshold: 99999
#    La vitesse (en mm/s) à laquelle le seuil "stealthChop" doit être fixé. Lorsque défini,
#    le mode "stealthChop" sera activé si la vitesse du moteur pas à pas est inférieure à
#    cette valeur. La valeur par défaut est 0, ce qui désactive le mode "stealthChop".

####################################################################
# B (Y-STEPPER) CONFIGURATION
####################################################################

[stepper_b]
step_pin: PE0
dir_pin: PB9
enable_pin: !PE1
microsteps: 128
rotation_distance: 40
full_steps_per_rotation: 200
endstop_pin: ^PD2
homing_speed: 60
homing_retract_dist: 5.0
homing_retract_speed: 10

#-----------------------------------------------------------------#

[tmc2209 stepper_b]
uart_pin: PD7
interpolate: False
run_current: 1.138
sense_resistor: 0.110
stealthchop_threshold: 99999

####################################################################
# C (Z-STEPPER) CONFIGURATION
####################################################################

[stepper_c]
step_pin: PB5
dir_pin: PB4
enable_pin: !PB8
microsteps: 128
rotation_distance: 40
full_steps_per_rotation: 200
endstop_pin: ^PC4
homing_speed: 60
homing_retract_dist: 5.0
homing_retract_speed: 10

#-----------------------------------------------------------------#

[tmc2209 stepper_c]
uart_pin: PD4
interpolate: False
run_current: 1.138
sense_resistor: 0.110
stealthchop_threshold: 99999

####################################################################
# CONFIGURATION EXTRUDEUR
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> CONTROL, PID_KP, PID_KI, PID_KD.
####################################################################

[extruder]
step_pin: PD6
#    Broche GPIO du moteur (déclenchée à l'état haut). Ce paramètre doit être fourni.
dir_pin: !PD3
#    Broche GPIO de direction (le niveau haut indique une direction positive).
#    Ce paramètre doit être fourni.
enable_pin: !PB3
#    Broche d'activation (par défaut, enable est haut ; utilisez ! pour indiquer enable
#    bas). Si ce paramètre n'est pas fourni, le pilote du moteur pas à pas doit toujours
#    être activé.
microsteps: 32
#    Le nombre de micropas utilisés par le pilote du moteur pas à pas.
#    Ce paramètre doit être fourni.
rotation_distance: 22.353
#    rotation_distance = <previous_rotation_distance> * <actual_extrude_distance> / <requested_extrude_distance>
#    pour commencer, mesurer le diametre de la roue de l'extrudeur : mesure x 3.14 = rotation distance.
#    Distance (en mm) parcourue par l'axe lors d'une rotation complète du moteur pas à pas
#    (ou de l'engrenage final si le rapport de vitesse est spécifié).
#    Ce paramètre doit être fourni.
full_steps_per_rotation: 200
#    Nombre de pas complets pour une rotation complète du moteur pas à pas.
#    Réglez ce paramètre sur 200 pour un moteur pas à pas de 1,8 degré ou sur 400 pour
#    un moteur de 0,9 degré. La valeur par défaut est 200.
gear_ratio: 50:17
#    Le rapport d'engrenage si le moteur pas à pas est relié à l'axe via une démultiplication.
#    Par exemple, on peut spécifier "5:1" si un réducteur de 5 pour 1 est utilisé.
#    Si l'axe a plusieurs démultiplications, on peut spécifier une liste de rapports séparés par
#    des virgules (par exemple, "57:11, 2:1"). Si un rapport de vitesse est spécifié, alors
#    rotation_distance spécifie la distance parcourue par l'axe pour une rotation complète
#    de l'engrenage final.
#    La valeur par défaut est de ne pas utiliser de rapport de vitesse.
nozzle_diameter: 0.400
#    Diamètre de l'orifice de la buse (en mm). Ce paramètre doit être fourni.
filament_diameter: 1.750
#    Diamètre moyen du filament (en mm) lorsqu'il entre dans l'extrudeuse.
#    Ce paramètre doit être fourni.
heater_pin: PE5
#    Broche de sortie PWM contrôlant le chauffage. Ce paramètre doit être fourni.
sensor_type: EPCOS 100K B57560G104F
#    Type de capteur - les thermistances courantes sont "EPCOS 100K B57560G104F",
#    "ATC Semitec 104GT-2", "ATC Semitec 104NT-4-R025H42G", "Generic
#    3950", "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", et "TDK NTCG104LH104JT1". Voir la section "Capteurs de
#    température" pour d'autres capteurs.
#    Ce paramètre doit être fourni.
sensor_pin: PC1
#    Broche d'entrée analogique connectée au capteur. Ce paramètre doit être fourni.
#control: pid
#    Algorithme de contrôle (soit pid, soit watermark). Ce paramètre doit être fourni.
#pid_kp = 19.954
#pid_ki = 0.864
#pid_kd = 115.234
#    Les paramètres proportionnels (pid_Kp), intégraux (pid_Ki), et dérivés (pid_Ki)
#    du système de contrôle par rétroaction PID. Klipper évalue les paramètres PID
#    avec la formule générale suivante :
#        fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255
#    Où "e" est "température_cible - température_mesurée" et
#    "fan_pwm" est le débit du ventilateur demandé, 0,0 correspondant à un arrêt complet
#    et 1,0 correspond à un fonctionnement à plein régime. Les paramètres pid_Kp, pid_Ki,
#    et pid_Kd doivent être fournis lorsque l'algorithme de contrôle PID est activé.
min_temp: 0
max_temp: 275
#    La plage maximale de températures valides (Celsius) dans laquelle l'élément de
#    chauffe doit rester. Ceci contrôle une fonction de sécurité implémentée dans le code
#    du micro-contrôleur - si la température mesurée sort de cette plage, le microcontrôleur
#    se met en état d'arrêt. Ce contrôle peut aider à détecter certaines défaillances matérielles
#    de l'élément chauffant et/ou du capteur. Définissez cette plage suffisamment large pour
#    que des températures raisonnables n'entraînent pas d'erreur.
#    Ces paramètres doivent être fournis.
pressure_advance: 0
#    La quantité de filament à pousser dans l'extrudeuse durant l'accélération de celle-ci.
#    Une quantité égale de filament est rétractée durant la décélération. Elle est mesurée
#    en millimètre/seconde. La valeur par défaut est 0, ce qui désactive la fonctionnalité
#    d'avance de pression.
pressure_advance_smooth_time: 0.040
#    Une durée (en secondes) à utiliser lors du calcul de la vitesse moyenne de l'extrudeuse
#    pour l'avance de pression. Une valeur plus grande donne lieu à des mouvements
#    d'extrusion plus lisses. Ce paramètre ne doit pas dépasser 200ms.
#    Ce paramètre ne s'applique que si pressure_advance est différent de zéro. La valeur
#    par défaut est 0.040 (40 millisecondes).
max_extrude_only_distance: 800.0
#    Longueur maximale (en mm de filament) qu'un mouvement de rétraction ou d'extrusion
#    peut fournir. Si un mouvement de rétraction ou d'extrusion unique demande une
#    distance supérieure à cette valeur, une erreur sera renvoyée.
#    La valeur par défaut est 50mm.
instantaneous_corner_velocity: 15
#    La variation instantanée maximale de la vitesse (en mm/s) de l'extrudeuse
#    pendant la jonction de deux mouvements. La valeur par défaut est 1mm/s.
max_extrude_only_accel: 2000
#    Vitesse maximale (en mm/s) et accélération (en mm/s^2) du moteur de l'extrudeuse
#    pour les rétractions et les mouvements d'extrusion seuls. Ces paramètres n'ont aucun
#    impact sur les mouvements d'impression normaux. S'ils ne sont pas spécifiés, ils sont
#    calculés pour correspondre à la limite d'un mouvement qu'une impression de
#    section transversale de 4.0*diamètre_buse^2 aurait.
max_extrude_cross_section: 50
#    Surface maximale (en mm^2) d'une section transversale d'extrusion (ex:
#    largeur de l'extrusion multipliée par la hauteur de la couche). Ce paramètre
#    permet d'éviter d'extruder des quantités excessives durant de petits déplacements
#    XY. Si un déplacement demande une quantité d'extrusion supérieure à cette valeur,
#    une erreur sera renvoyée. La valeur par défaut est 4.0 *diamètre_buse^2

#-----------------------------------------------------------------#

[tmc2209 extruder]
uart_pin: PD9
#    La broche connectée à la ligne PDN_UART de la TMC2209. Ce paramètre doit être fourni.
interpolate: True
#    Si true, active l'interpolation de pas (le pilote fera un pas interne à un taux de 256
#    micro-pas). Cette interpolation introduit une petite déviation systémique de la position -
#    voir TMC_Drivers.md pour plus de détails. La valeur par défaut est True.
run_current: 1.100
#    La quantité de courant (en ampères RMS) à configurer que le pilote doit utiliser
#    pendant le mouvement du pas. Ce paramètre doit être fourni.
sense_resistor: 0.110
#    La résistance (en ohms) de la résistance de détection du moteur (Vréf).
#    La valeur par défaut est de 0.110 ohms.
stealthchop_threshold:999999
#    La vitesse (en mm/s) à laquelle le seuil "stealthChop" doit être fixé. Lorsque défini,
#    le mode "stealthChop" sera activé si la vitesse du moteur pas à pas est inférieure à
#    cette valeur. La valeur par défaut est 0, ce qui désactive le mode "stealthChop".

####################################################################
# CONFIGURATION PLATEAU CHAUFFANT
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> CONTROL, PID_KP, PID_KI, PID_KD.
####################################################################

[heater_bed]
heater_pin: PA0
#    Broche de sortie PWM contrôlant le chauffage. Ce paramètre doit être fourni.
sensor_type: EPCOS 100K B57560G104F
#    Type de capteur - les thermistances courantes sont "EPCOS 100K B57560G104F",
#    "ATC Semitec 104GT-2", "ATC Semitec 104NT-4-R025H42G", "Generic
#    3950", "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", et "TDK NTCG104LH104JT1". Voir la section "Capteurs de
#    température" pour d'autres capteurs. Ce paramètre doit être fourni.
sensor_pin: PC0
#    Broche d'entrée analogique connectée au capteur. Ce paramètre doit être fourni.
min_temp: 0
max_temp: 110
#    La plage maximale de températures valides (Celsius) dans laquelle l'élément de
#    chauffe doit rester. Ceci contrôle une fonction de sécurité implémentée dans le code
#    du micro-contrôleur - si la température mesurée sort de cette plage, le microcontrôleur
#    se met en état d'arrêt. Ce contrôle peut aider à détecter certaines défaillances matérielles
#    de l'élément chauffant et/ou du capteur. Définissez cette plage suffisamment large pour
#    que des températures raisonnables n'entraînent pas d'erreur.
#    Ces paramètres doivent être fournis.
#control: pid
#    Algorithme de contrôle (soit pid, soit watermark). Ce paramètre doit être fourni.
#pid_kp = 68.574
#pid_ki = 0.981
#pid_kd = 1198.334
#    Les paramètres proportionnels (pid_Kp), intégraux (pid_Ki) et dérivés (pid_Kd)
#    du système de contrôle de rétroaction PID. Klipper évalue les paramètres PID avec
#    la formule générale suivante :
#       heater_pwm = (Kp*erreur + Ki*intégrale(erreur) - Kd*dérivée(erreur)) / 255
#    Où "erreur" est le résultat de "requested_temperature - measured_temperature" et
#    "heater_pwm" est le taux de chauffage demandé, 0.0 étant complètement éteint et
#    1.0 étant complètement allumé. Pensez à utiliser la commande PID_CALIBRATE pour
#    obtenir ces paramètres.  Les paramètres pid_Kp, pid_Ki, et pid_Kd doivent être
#    fournis pour l'algorithme PID.

####################################################################
# REFROIDISSEMENT
####################################################################

[fan]
pin: PC14
#    Broche de sortie contrôlant le ventilateur. Ce paramètre doit être fourni.
max_power: 1.0
#    La puissance maximale (exprimée sous la forme d'une valeur comprise entre 0,0 et 1,0)
#    de réglage du heater_pin . La valeur 1.0 permet à la broche d'être réglée comme toujours
#    activée durant des périodes prolongées, tandis qu'une valeur de 0,5 permet à la broche
#    de n'être activée durant au plus la moitié du temps.
#    Ce réglage peut être utilisé pour limiter la puissance totale de sortie (sur de longues
#    périodes) de l'élément de chauffe. La valeur par défaut est 1.0.
#cycle_time: 0.010
#    La durée (en secondes) de chaque cycle d'alimentation PWM du ventilateur. Il est
#    recommandé que cette durée soit de 10 millisecondes ou plus si vous utilisez un PWM logiciel.
#    La valeur par défaut est de 0,010 seconde.
kick_start_time: 0.0
#    Durée (en secondes) de fonctionnement du ventilateur à pleine vitesse, soit lors de sa première
#    activation soit lors d'une augmentation de plus de 50% (pour faire tourner le ventilateur).
#    La valeur par défaut est de 0,100 seconde.

#-----------------------------------------------------------------#

[heater_fan heatsink_fan]
pin: PB0 #PB1
#    Broche de sortie contrôlant le ventilateur. Ce paramètre doit être fourni.
max_power: 1.0
#    La puissance maximale (exprimée sous la forme d'une valeur comprise entre 0,0 et 1,0)
#    de réglage du heater_pin . La valeur 1.0 permet à la broche d'être réglée comme toujours
#    activée durant des périodes prolongées, tandis qu'une valeur de 0,5 permet à la broche
#    de n'être activée durant au plus la moitié du temps.
#    Ce réglage peut être utilisé pour limiter la puissance totale de sortie (sur de longues
#    périodes) de l'élément de chauffe. La valeur par défaut est 1.0.
heater: extruder
#    Nom de la section de configuration définissant le chauffage auquel ce ventilateur est associé.
#    Si une liste de noms d'éléments chauffants séparés par des virgules est fournie ici, le
#    ventilateur sera activé lorsque l'un des chauffages donnés est activé.
#    La valeur par défaut est "extruder".
heater_temp: 50.0
#    Température (en Celsius) en dessous de laquelle l'élément chauffant doit descendre pour que
#    le ventilateur soit désactivé. La valeur par défaut est 50 °C.
fan_speed: 1.0
#    La vitesse du ventilateur (exprimée sous la forme d'une valeur comprise entre 0,0 et 1,0) à
#    laquelle le ventilateur sera réglé lorsque l'élément chauffant qui lui est associé est activé.
#    La valeur par défaut est 1.0
#cycle_time: 0.010
#    La durée (en secondes) de chaque cycle d'alimentation PWM du ventilateur. Il est
#    recommandé que cette durée soit de 10 millisecondes ou plus si vous utilisez un PWM logiciel.
#    La valeur par défaut est de 0,010 seconde.
kick_start_time: 0.0
#    Durée (en secondes) de fonctionnement du ventilateur à pleine vitesse, soit lors de sa première
#    activation soit lors d'une augmentation de plus de 50% (pour faire tourner le ventilateur).
#    La valeur par défaut est de 0,100 seconde.

####################################################################
# CALIBRATION DELTA - MESH - PROBE
####################################################################

[delta_calibrate]
radius: 127.5
#    Rayon (en mm) de la zone palpable. Il s'agit du rayon des coordonnées de la buse à sonder ; si
#    vous utilisez un palpeur automatique avec un décalage XY, choisissez un rayon suffisamment
#    petit pour que la sonde reste toujours au-dessus du lit.
#    Ce paramètre doit être fourni.
speed: 50
#    La vitesse (en mm/s) des mouvements sans palpage pendant l'étalonnage.
#    La valeur par défaut est 50.
horizontal_move_z: 30
#    La hauteur (en mm) à laquelle la tête doit être relevée pour se déplacer
#    juste avant de lancer une opération de palpage. La valeur par défaut est 5.

#-----------------------------------------------------------------#

[bed_mesh]
speed: 100
#    La vitesse (en mm/s) des déplacements entre les points de palpage
#    durant l'étalonnage. La valeur par défaut est 50.
horizontal_move_z: 30
#    La hauteur (en mm) à laquelle la tête doit être relevée juste avant de
#    lancer une opération de palpage. La valeur par défaut est 5.
mesh_radius: 125
#    Définit le rayon de la maille à palper pour les lits circulaires. Notez que
#    le rayon est relatif aux coordonnées spécifiées par l'option
#    mesh_origin. Ce paramètre doit être fourni pour des lits circulaires
#    et omis pour des lits rectangulaires.
mesh_origin: 0,0
#    Définit les coordonnées X, Y du centre du maillage des lits circulaires.
#    Ces coordonnées sont relatives à l'emplacement de la sonde. Il peut être
#    utile d'ajuster l'origine du maillage afin de maximiser la taille du rayon
#    du maillage. La valeur par défaut est 0, 0. Ce paramètre doit être omis
#    pour des lits rectangulaires.
round_probe_count: 11
#    Pour les lits circulaires, cette valeur entière définit le nombre maximum
#    de points à palper le long de chaque axe. Cette valeur doit être un
#    nombre impair. La valeur par défaut est 5..
fade_start: 1.0
#    La position z du gcode à partir de laquelle il faut commencer à éliminer
#    progressivement l'ajustement z lorsque la compensation est activée.
#    La valeur par défaut est 1.0.
fade_end: 10.0
#    La position z du gcode à partir de laquelle la compensation se termine.
#    Lorsqu'elle est définie à une valeur inférieure à fade_start, la compensation
#    est désactivée. Notez que la compensation peut ajouter une mise à l'échelle
#    indésirable le long de l'axe z d'une impression. Si un utilisateur souhaite
#    activer la compensation, une valeur de 10.0 est recommandée.
#    La valeur par défaut est 0.0, ce qui désactive la compensation.
#fade_target:
#    La position z vers laquelle la compensation doit converger. Lorsque cette
#    valeur est définie à une valeur non nulle, elle doit se situer dans la plage des
#    valeurs z du maillage. Les utilisateurs qui souhaitent converger vers la
#    position de mise à l'origine du Z doivent régler cette valeur à 0.
#    La valeur par défaut est la valeur z moyenne du maillage.
#split_delta_z: 0.025
#    Le delta de différence de Z (en mm) le long d'un mouvement qui
#    déclenchera une séparation. La valeur par défaut est de 0,025.
#move_check_distance: 3.0
#    La distance (en mm) le long d'un mouvement pour vérifier le split_delta_z.
#    C'est également la longueur minimale pour laquelle un mouvement peut
#    être divisé. La valeur par défaut est 5.0.
#mesh_pps: 2, 2
#    Une paire de nombres entiers X, Y séparés par des virgules, définissant le
#    nombre de points par segment à interpoler dans le maillage le long de
#    chaque axe. Un "segment" étant défini comme l'espace entre chaque point
#    palpé. L'utilisateur peut saisir une seule valeur s'appliquant alors aux
#    deux axes. La valeur par défaut est 2, 2.
algorithm: bicubic
#    L'algorithme d'interpolation à utiliser. Soit "lagrange", soit "bicubic".
#    Cette option n'affecte pas les grilles 3x3 forcées d'utiliser l'échantillonnage
#    de lagrange. La valeur par défaut est lagrange.
#bicubic_tension: 0.2
#    Lors de l'utilisation de l'algorithme bicubic, le paramètre de tension ci-
#    dessus peut être appliqué pour modifier la quantité de pente interpolée.
#    Des nombres plus grands augmenteront la quantité de pente entraînant
#    une plus grande courbure du maillage. La valeur par défaut est 0,2.
#relative_reference_index:
#    Un index de points dans le maillage auquel référencer toutes les valeurs z.
#    En activant ce paramètre, on produit un maillage relatif à la position z palpée
#    de l'indice fourni.
#faulty_region_1_min:
#faulty_region_1_max:
#    Points optionnels définissant une région défectueuse.
#    Voir docs/Bed_Mesh.md pour plus de détails sur les régions défectueuses.
#    Jusqu'à 99 régions défectueuses peuvent être ajoutées.
#    Par défaut, aucune région défectueuse n'est définie.

####################################################################
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> Z_OFFSET.
####################################################################

[probe]
pin: ^!PC8
#    Broche de détection de la sonde. Si la broche se trouve sur un microcontrôleur différent
#    de celui des moteurs de l'axe Z alors elle active le "multi-mcu homing". Ce paramètre
#    doit être fourni.
x_offset: 0.0
#    La distance (en mm) entre la sonde et la buse le long de l'axe x.
#    La valeur par défaut est 0.
y_offset: 0.0
#    La distance (en mm) entre la sonde et la buse le long de l'axe y.
#    La valeur par défaut est 0.
#z_offset: 16.0
#    La distance (en mm) entre le lit et la buse lorsque la sonde se déclenche.
#    Ce paramètre doit être fourni.
speed: 10
#    Vitesse (en mm/s) de l'axe Z lors du palpage. La valeur par défaut est 5mm/s.
samples: 3
#    Le nombre de fois où il faut palper chaque point. Les valeurs z palpées seront
#    moyennées. La valeur par défaut est de palper 1 fois.
sample_retract_dist: 3
#    Distance (en mm) à parcourir pour relever la tête de l'outil entre chaque palpage
#    (en cas d'échantillonnage multiple). La valeur par défaut est 2mm.
lift_speed: 50.0
#    Vitesse (en mm/s) de l'axe Z lors du levage de la sonde entre les échantillons.
#    La valeur par défaut est la même que celle du paramètre 'speed'.
samples_result: average
#    La méthode de calcul lorsque l'on échantillonne plusieurs fois - soit "médiane"
#    (median) ou "moyenne" (average). La valeur par défaut est "moyenne".
samples_tolerance: 0.02
#    La distance Z maximale (en mm) à laquelle un échantillon peut différer des autres
#    échantillons. Si cette tolérance est dépassée, soit une erreur est signalée soit une
#    tentative de palpage est recommencée (cf. samples_tolerance_retries).
#    La valeur par défaut est 0.100mm.
samples_tolerance_retries: 5
#    Le nombre de fois qu'il faut réessayer quand un palpage dépasse la tolérance des
#    échantillons. Lors d'une nouvelle tentative, tous les échantillons en cours sont rejetés
#    et une tentative de palpa est relancée. Si un ensemble valide d'échantillons n'est pas
#    obtenu dans le nombre de tentatives donné, une erreur est signalée. La valeur par défaut
#    est zéro, ce qui entraîne le signalement d'une erreur dès le premier échantillon dépassant
#    la tolérance de samples_tolerance.


####################################################################
# PROTECTION THERMAL
####################################################################

[verify_heater extruder]
max_error: 130
#    L'erreur de température cumulée maximale avant de déclencher une erreur.
#    Des valeurs plus petites entraînent une vérification plus stricte et des valeurs
#    plus grandes permettent un délai plus long avant qu'une erreur ne soit signalée.
#    Plus précisément, la température est inspectée une fois par seconde et si elle
#    est proche de la température cible, un "compteur d'erreurs" interne est remis
#    à zéro; sinon, si la température est inférieure à la plage cible, le compteur est
#    augmenté de la quantité de température rapportée différant de cette plage. Si
#    le compteur dépasse ce "max_error", une erreur est signalée. La valeur par
#    défaut est 120.
#check_gain_time:
#    Ceci contrôle la vérification du chauffage durant la chauffe initiale. Des valeurs
#    plus petites entraînent une vérification plus stricte et des valeurs plus grandes
#    autorisent un délai plus grand avant qu'une erreur ne soit signalée. Spécifiquement,
#    pendant la chauffe initiale, tant que la température de l'élément chauffant augmente
#    durant ce laps de temps (spécifié en secondes), le "compteur d'erreurs" interne est
#    remis à zéro. La valeur par défaut est de 20 secondes pour les extrudeuses et 60
#    secondes pour le lit chauffant.
hysteresis: 5
#    La différence de température maximale (en Celsius) par rapport à une température
#    cible considérée comme située dans la plage de la cible. Ceci contrôle la vérification
#    de la plage du paramètre max_error. Il est rare de personnaliser cette valeur.
#   La valeur par défaut est 5.
#heating_gain: 2
#    La température minimale (en Celsius) pour laquelle le chauffage doit progresser
#    pendant la période de check_gain_time. Il est rare de personnaliser cette valeur.
#    La valeur par défaut est 2.

#-----------------------------------------------------------------#

[verify_heater heater_bed]
max_error: 120
#    L'erreur de température cumulée maximale avant de déclencher une erreur.
#    Des valeurs plus petites entraînent une vérification plus stricte et des valeurs
#    plus grandes permettent un délai plus long avant qu'une erreur ne soit signalée.
#    Plus précisément, la température est inspectée une fois par seconde et si elle
#    est proche de la température cible, un "compteur d'erreurs" interne est remis
#    à zéro; sinon, si la température est inférieure à la plage cible, le compteur est
#    augmenté de la quantité de température rapportée différant de cette plage. Si
#    le compteur dépasse ce "max_error", une erreur est signalée. La valeur par
#    défaut est 120.
#check_gain_time:
#    Ceci contrôle la vérification du chauffage durant la chauffe initiale. Des valeurs
#    plus petites entraînent une vérification plus stricte et des valeurs plus grandes
#    autorisent un délai plus grand avant qu'une erreur ne soit signalée. Spécifiquement,
#    pendant la chauffe initiale, tant que la température de l'élément chauffant augmente
#    durant ce laps de temps (spécifié en secondes), le "compteur d'erreurs" interne est
#    remis à zéro. La valeur par défaut est de 20 secondes pour les extrudeuses et 60
#    secondes pour le lit chauffant.
hysteresis: 5
#    La différence de température maximale (en Celsius) par rapport à une température
#    cible considérée comme située dans la plage de la cible. Ceci contrôle la vérification
#    de la plage du paramètre max_error. Il est rare de personnaliser cette valeur.
#   La valeur par défaut est 5.
#heating_gain: 2
#    La température minimale (en Celsius) pour laquelle le chauffage doit progresser
#    pendant la période de check_gain_time. Il est rare de personnaliser cette valeur.
#    La valeur par défaut est 2.

####################################################################
# CONFIGURATION ENDSTOP
####################################################################

[endstop_phase stepper_a]
endstop_align_zero: false
#    Si vrai, la position_endstop de l'axe sera effectivement modifiée de
#    manière à ce que la position zéro de l'axe se produise sur un pas
#    complet du moteur pas à pas. (Si utilisé sur l'axe Z et que la hauteur
#    de la couche d'impression est un multiple de la distance parcourue
#    par un pas complet, alors chaque couche se produira sur un pas
#    complet). La valeur par défaut est False.

[endstop_phase stepper_b]
endstop_align_zero: false

[endstop_phase stepper_c]
endstop_align_zero: false

####################################################################
# CAPTEUR DE FIN DE FILAMENT
####################################################################

[filament_switch_sensor filament_sensor]
switch_pin: PA4
#    La broche sur laquelle l'interrupteur est connecté. Ce paramètre doit être fourni.
pause_on_runout: True
#    Lorsque défini sur True, une PAUSE sera exécutée immédiatement après qu'un runout
#    soit détecté. Notez que si pause_on_runout est False et que le runout_gcode est omis,
#    la détection du runout est désactivée. Par défaut, est True.
#runout_gcode: PAUSE
#    Une liste de commandes G-Code à exécuter après la détection d'une fin de filament.
#    Voir docs/Command_Templates.md pour le format G-Code. Si pause_on_runout est
#    réglé sur True, ce G-code sera exécuté après la fin de la PAUSE. Par défaut, aucune
#    commande G-Code n'est exécutée.
#insert_gcode:
#    Une liste de commandes G-Code à exécuter après qu'une insertion de filament soit détectée.
#    Voir docs/Command_Templates.md pour le format G-Code. La valeur par défaut est de
#    n'exécuter aucune commande G-Code, ce qui désactive la détection de l'insertion.
event_delay: 2.0
#    La durée minimale en secondes à attendre entre les événements.
#    Des événements déclenchés durant cette période seront silencieusement ignorés.
#    La valeur par défaut est de 3 secondes.
#pause_delay: 0.5
#    Le délai, en secondes, entre l'envoi de la commande de pause et l'exécution du runout_gcode.
#    Il peut être utile d'augmenter ce délai si OctoPrint présente un comportement étrange lors de
#    la pause. La valeur par défaut est 0.5 secondes.

####################################################################
# COMPENSATION DE RÉSONANCE
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> SHAPER_TYPE_X, SHAPER_FREQ_X, SHAPER_TYPE_Y, SHAPER_FREQ_Y
####################################################################

[input_shaper]
#shaper_type_x: ei
#    Si shaper_type n'est pas défini, ces deux paramètres peuvent être utilisés pour configurer
#    des formes d'entrée différentes pour les axes X et Y. Les valeurs supportées sont les
#    mêmes que celles du paramètre shaper_type.
#shaper_freq_x: 43.8
#    Fréquence (en Hz) de la mise en forme de l'entrée pour l'axe X. Il s'agit généralement
#    d'une fréquence de résonance de l'axe X que la mise en forme de l'entrée doit supprimer.
#    Pour les mises en forme plus complexes, comme les mises en forme à 2 ou 3 bosses EI
#    (2hump/3hump), ce paramètre peut être défini à partir de différentes considérations.
#    La valeur par défaut est 0, ce qui désactive la mise en forme de l'entrée pour l'axe X.
#shaper_type_y: mzv
#    Si shaper_type n'est pas défini, ces deux paramètres peuvent être utilisés pour configurer
#    des formes d'entrée différentes pour les axes X et Y. Les valeurs supportées sont les
#    mêmes que celles du paramètre shaper_type.
#shaper_freq_y: 45.8
#    Fréquence (en Hz) de la mise en forme de l'entrée pour l'axe Y. Il s'agit généralement
#    d'une fréquence de résonance de l'axe Y que la mise en forme de l'entrée doit supprimer.
#    Pour les mises en forme plus complexes, comme les mises en forme à 2 ou 3 bosses EI
#    (2hump/3hump), ce paramètre peut être défini à partir de différentes considérations.
#    La valeur par défaut est 0, ce qui désactive la mise en forme de l'entrée pour l'axe Y.

####################################################################
# AUTRES
####################################################################

[temperature_sensor Orange_pi]
sensor_type: temperature_host
#    Le micro-contrôleur à lire. La valeur par défaut est "mcu".

#-----------------------------------------------------------------#

[temperature_sensor Super_Racer]
sensor_type: temperature_mcu
#    Le micro-contrôleur à lire. La valeur par défaut est "mcu".

#-----------------------------------------------------------------#

[gcode_arcs]
resolution: 1.0
#    Un arc sera divisé en segments. La longueur de chaque segment sera égale à
#    la résolution en mm définie ci-dessus. Des valeurs plus faibles produiront un
#    arc plus fin, mais également plus de travail de votre machine. Les arcs plus
#    petits que la valeur configurée deviendront des lignes droites. La valeur par
#    défaut est 1 mm.

#-----------------------------------------------------------------#

[pause_resume]
#recover_velocity: 50.
#    Lorsque la capture/restauration est activée, la vitesse à laquelle retourner à
#    la position capturée (en mm/s). La valeur par défaut est 50,0 mm/s.

#-----------------------------------------------------------------#

[display_status]
#    Les informations suivantes sont disponibles dans l’objet display_status (cet objet est
#    automatiquement disponible si une section de configuration affichage est définie) :
#    progress : la valeur de progression de la dernière commande G-Code M73 (ou virtual_sdcard.progress
#    si aucune commande M73 récente n'a été reçue.
#    message : Le message contenu dans la dernière commande G-Code M117.

#-----------------------------------------------------------------#

[respond]
#default_type: echo
#    Définit le préfixe par défaut de la sortie "M118" et "RESPOND" à l'un des
#    éléments suivants :
#            echo: "echo : " (C'est la valeur par défaut)
#            command: "// "
#            error: " !! "
#default_prefix: echo:
#    Définit directement le préfixe par défaut. Si elle est présente, cette valeur
#    remplacera celle de "default_type".

#-----------------------------------------------------------------#

[exclude_object]
#    Permet de prendre en charge l'exclusion ou l'annulation d'objets
#    individuels pendant le processus d'impression.

####################################################################
# ALIAS PINS
####################################################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PC5,  EXP1_3=PD13, EXP1_5=PE14, EXP1_7=PD11, EXP1_9=<GND>,
    EXP1_2=PE13, EXP1_4=PC6,  EXP1_6=PE15, EXP1_8=PD10, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PE8, EXP2_5=PE11, EXP2_7=PE12,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PE10, EXP2_6=PA7, EXP2_8=<RST>, EXP2_10=<3.3v>
    # Pins EXP2_1, EXP2_6, EXP2_2 are also MISO, MOSI, SCK of bus "ssp1"

####################################################################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [probe]
#*# z_offset = 16
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 68.574
#*# pid_ki = 0.981
#*# pid_kd = 1198.334
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 19.954
#*# pid_ki = 0.864
#*# pid_kd = 115.234
#*#
#*# [input_shaper]
#*# shaper_type_x = ei
#*# shaper_freq_x = 45.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 48.2
#*#
#*# [endstop_phase stepper_a]
#*# trigger_phase = 83/512
#*#
#*# [endstop_phase stepper_b]
#*# trigger_phase = 509/512
#*#
#*# [endstop_phase stepper_c]
#*# trigger_phase = 486/512
#*#
#*# [printer]
#*# delta_radius = 151.970247
#*#
#*# [stepper_a]
#*# angle = 209.982521
#*# arm_length = 315.000000
#*# position_endstop = 333.680185
#*#
#*# [stepper_b]
#*# angle = 329.908636
#*# arm_length = 315.000000
#*# position_endstop = 334.640698
#*#
#*# [stepper_c]
#*# angle = 90.000000
#*# arm_length = 315.000000
#*# position_endstop = 334.851086
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114, -0.140114
#*# 	  -0.017369, -0.017369, -0.017369, -0.044994, -0.032236, -0.045413, -0.099409, -0.116201, -0.086511, -0.086511, -0.086511
#*# 	  0.003272, 0.003272, -0.041258, -0.038337, -0.002259, 0.010206, -0.005036, -0.033767, -0.037901, -0.016086, -0.016086
#*# 	  0.018192, 0.018192, -0.002418, -0.017629, 0.008852, 0.034494, 0.034112, 0.019361, 0.004258, -0.004613, -0.004613
#*# 	  0.004599, 0.004599, 0.004763, -0.010919, -0.000712, 0.034198, 0.056589, 0.065910, 0.037672, 0.020792, 0.020792
#*# 	  -0.025862, -0.013097, 0.014381, 0.010595, 0.006852, 0.022948, 0.047886, 0.067276, 0.048574, -0.006171, -0.052743
#*# 	  -0.020500, -0.020500, 0.001097, 0.010341, 0.013523, 0.005496, 0.031246, 0.052274, 0.029796, -0.005508, -0.005508
#*# 	  -0.016956, -0.016956, 0.013780, 0.023863, 0.023521, -0.004171, -0.003518, 0.008429, 0.005820, -0.035317, -0.035317
#*# 	  0.013935, 0.013935, 0.003381, -0.002076, 0.009000, -0.006045, -0.033241, -0.032644, -0.034800, -0.116734, -0.116734
#*# 	  0.029694, 0.029694, 0.029694, 0.019970, 0.015584, 0.002853, -0.012934, -0.081641, -0.156022, -0.156022, -0.156022
#*# 	  0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787, 0.017787
#*# x_count = 11
#*# y_count = 11
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = -125.0
#*# max_x = 125.0
#*# min_y = -125.0
#*# max_y = 125.0
#*#
#*# [delta_calibrate]
#*# height0 = 16.0
#*# height0_pos = 203369.667,203843.333,204092.000
#*# height1 = 16.0
#*# height1_pos = 247117.667,247697.667,180019.667
#*# height2 = 16.0
#*# height2_pos = 198426.000,273111.667,199155.333
#*# height3 = 16.0
#*# height3_pos = 180250.667,240202.000,240533.000
#*# height4 = 16.0
#*# height4_pos = 197029.667,197447.000,251053.667
#*# height5 = 16.0
#*# height5_pos = 233435.000,182138.000,234151.000
#*# height6 = 16.0
#*# height6_pos = 260721.667,198122.333,198311.667
